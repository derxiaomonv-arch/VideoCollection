<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>去水印下载工具</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div id="password-gate" class="gate">
        <div class="gate-card">
            <h2>进入验证</h2>
            <p>请输入访问密码：</p>
            <input id="password-input" type="password" placeholder="请输入密码" />
            <button id="password-submit" type="button" onclick="window.__enter && window.__enter()">进入</button>
            <p id="password-error" class="error"></p>
        </div>
    </div>

    <main id="app" class="hidden">
        <header>
            <h1>去水印下载</h1>
        </header>

        <section class="controls panel">
            <!-- API秘钥字段已隐藏，程序内部处理 -->
            <input id="api-ak" type="hidden" />

            <label for="share-text">粘贴抖音分享内容</label>
            <textarea id="share-text" rows="4" placeholder="请在此粘贴抖音分享链接或分享文本...&#10;例如：https://v.douyin.com/xxxxxxx/ 或包含链接的完整分享文本"></textarea>

            <div class="actions">
                <button id="parse-btn" class="btn-primary">
                    <span class="btn-icon">🎬</span>
                    开始解析视频
                </button>
                <span id="status" class="status"></span>
            </div>
        </section>

        <section id="result" class="result panel hidden">
            <div class="result-header">
                <h2>📹 解析成功</h2>
                <div class="result-title">
                    <span id="title"></span>
                </div>
            </div>
            
            <div class="result-content">
                <div class="preview-section">
                    <div class="preview-container">
                        <img id="cover-img" alt="视频封面" />
                        <div class="preview-overlay">
                            <span class="play-icon">▶️</span>
                        </div>
                    </div>
                </div>
                
                <div class="actions-section">
                    <div class="action-group">
                        <h3>🎥 视频操作</h3>
                        <div class="button-group">
                            <button id="download-video" class="btn-primary">
                                <span class="btn-icon">⬇️</span>
                                下载视频
                            </button>
                            <button id="open-video" class="btn-secondary">
                                <span class="btn-icon">🔗</span>
                                在线观看
                            </button>
                            <button id="copy-video" class="btn-secondary">
                                <span class="btn-icon">📋</span>
                                复制链接
                            </button>
                        </div>
                    </div>
                    
                    <div class="action-group">
                        <h3>🖼️ 封面操作</h3>
                        <div class="button-group">
                            <button id="download-cover" class="btn-primary">
                                <span class="btn-icon">⬇️</span>
                                下载封面
                            </button>
                            <button id="open-cover" class="btn-secondary">
                                <span class="btn-icon">🔗</span>
                                查看封面
                            </button>
                            <button id="copy-cover" class="btn-secondary">
                                <span class="btn-icon">📋</span>
                                复制链接
                            </button>
                        </div>
                    </div>
                    
                    <!-- 隐藏的链接元素，用于兼容现有代码 -->
                    <div style="display: none;">
                        <a id="video-url" href="#" target="_blank" rel="noopener noreferrer"></a>
                        <a id="cover-url" href="#" target="_blank" rel="noopener noreferrer"></a>
                    </div>
                </div>
            </div>
        </section>

        <footer>
            <small>仅供学习交流，请勿用于商业用途。</small>
        </footer>
    </main>

    <div id="toast" class="toast-container"></div>

    <script src="./script.js"></script>
</body>
</html>


